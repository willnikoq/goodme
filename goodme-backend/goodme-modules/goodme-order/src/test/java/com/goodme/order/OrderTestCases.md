# 订单模块测试用例

## 1. 创建订单

### 测试用例1：正常创建订单
**请求参数：**
```json
{
  "shopId": 1,
  "items": [
    {
      "productId": 101,
      "skuId": 1001,
      "quantity": 2,
      "specJson": "[{\"specId\":1,\"specName\":\"规格\",\"valueId\":1,\"valueName\":\"中杯\",\"extraPrice\":0}]"
    },
    {
      "productId": 102,
      "skuId": 1002,
      "quantity": 1,
      "specJson": "[{\"specId\":1,\"specName\":\"规格\",\"valueId\":2,\"valueName\":\"大杯\",\"extraPrice\":2}]"
    }
  ],
  "remark": "少糖，多冰"
}
```

**预期结果：**
- 状态码：200
- 返回订单详情，包含订单号、总金额、商品列表等

### 测试用例2：创建订单（商品不存在）
**请求参数：**
```json
{
  "shopId": 1,
  "items": [
    {
      "productId": 999,
      "skuId": 9999,
      "quantity": 1,
      "specJson": "[]"
    }
  ],
  "remark": ""
}
```

**预期结果：**
- 状态码：500
- 错误信息：商品不存在

## 2. 获取订单列表

### 测试用例1：获取用户所有订单
**请求参数：**
```json
{}
```

**预期结果：**
- 状态码：200
- 返回用户所有订单列表，按创建时间倒序排列

## 3. 获取订单详情

### 测试用例1：获取存在的订单
**请求参数：**
```json
{
  "orderId": 1
}
```

**预期结果：**
- 状态码：200
- 返回订单详情，包含订单信息和订单项列表

### 测试用例2：获取不存在的订单
**请求参数：**
```json
{
  "orderId": 999
}
```

**预期结果：**
- 状态码：500
- 错误信息：订单不存在

## 4. 取消订单

### 测试用例1：取消未支付订单
**请求参数：**
```json
{
  "orderId": 1
}
```

**预期结果：**
- 状态码：200
- 成功取消订单，订单状态变为"CANCELLED"

### 测试用例2：取消已支付订单
**请求参数：**
```json
{
  "orderId": 2
}
```

**预期结果：**
- 状态码：500
- 错误信息：订单不可取消

## 5. 支付订单

### 测试用例1：支付未支付订单
**请求参数：**
```json
{
  "orderId": 3,
  "payType": "WECHAT"
}
```

**预期结果：**
- 状态码：200
- 成功支付订单，订单状态变为"PAID"，生成取餐码

### 测试用例2：支付已支付订单
**请求参数：**
```json
{
  "orderId": 4,
  "payType": "ALIPAY"
}
```

**预期结果：**
- 状态码：500
- 错误信息：订单不可支付

## 6. 查询支付结果

### 测试用例1：查询已支付订单
**请求参数：**
```json
{
  "orderId": 4
}
```

**预期结果：**
- 状态码：200
- 返回true，表示已支付

### 测试用例2：查询未支付订单
**请求参数：**
```json
{
  "orderId": 5
}
```

**预期结果：**
- 状态码：200
- 返回false，表示未支付 